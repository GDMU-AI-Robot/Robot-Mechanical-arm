# WiFi 控制嵌入式机械臂智能小车

一个低成本的嵌入式机器人机械臂小车项目，具备 WiFi 远程控制和实时视频传输功能，采用模块化设计，便于调试和扩展。

## 📌 项目概述

- 本项目整合了嵌入式控制、WiFi 通信和网页交互技术，打造了一款可通过电脑远程控制的智能小车。
- 适用于GDMU->中国教育机器人大赛项目。它支持基于键盘的运动控制（WASD 键）和辅助操作（JKL 键），并能从车头视角实时回传视频画面。项目核心架构采用“通信-控制分离”设计：ESP32负责WiFi数据传输与视频采集，Black板（主控制器）专注于电机和机械臂的底层驱动，两者通过UART串口协议协同工作。

注：AT89s52开发板的烧录程序，提供教程和步骤。更多的工具详看线下文件。

## 🔧 硬件架构

### 核心组件  
| 模块         | 规格参数                | 功能说明                                                                 |
|--------------|-------------------------|--------------------------------------------------------------------------|
| 主控制器     | Black Board | 解析串口指令，驱动小车电机和机械臂舵机，执行运动与抓取逻辑                 |
| 通信与图传   | ESP32（带摄像头）       | 建立WiFi热点（支持TCP/UDP连接），接收网页控制指令，传输MJPEG实时视频流    |
| 小车驱动     | 2路直流舵机+1个万向轮   | 舵机驱动主动轮实现移动（PWM调速），万向轮辅助转向平衡                     |
| 机械臂系统   | 5自由度舵机机械臂       | 含基座（A）、大臂（B）、小臂（C）、腕部（D）、夹爪（E），支持抓取小型物体 |
| 电源         | 4节3.7V 18650锂电池     | 2节供电Black Board，2节供电ESP32                        |

<p align="center">
  <div style="display:inline-block; margin-left:-50px;">
    <img src="https://github.com/user-attachments/assets/5ae323cb-394e-4b47-9ef5-23c00fc20ea0" height="300" hspace="10">
    <img src="https://github.com/user-attachments/assets/539a08c3-4374-4163-abd8-02fe4fd55536" height="300">
  </div>
</p>

### 接线说明  
#### 基础连接（小车+通信）  
- ESP32 TX → Black板 RX（串口数据传输）  
- ESP32 RX → Black板 TX（指令回传）  
- 驱动舵机1（左轮）→ Black板引脚6（PWM信号）  
- 驱动舵机2（右轮）→ Black板引脚7（PWM信号）  
- ESP32摄像头 → 内置（无需额外接线）
 
- #### 机械臂连接（5路舵机）  
| 机械臂关节 | 对应舵机对象 | 连接引脚（Black板） | 脉冲范围（us） |
|------------|--------------|---------------------|----------------|
| 基座旋转   | POINT_A      | 3                   | 500-2500       |
| 大臂控制   | POINT_B      | 5                   | 500-2500       |
| 小臂控制   | POINT_C      | 9                   | 500-2500       |
| 腕部控制   | POINT_D      | 10                  | 500-2500       |
| 夹爪控制   | POINT_E      | 11                  | 500-2500       |     

## 💻 软件实现

### 1. ESP32 固件

*   **WiFi 通信**：基于 Arduino 框架建立与电脑的 TCP/UDP 连接，接收网页客户端发送的键盘指令。

*   **视频传输**：通过 WiFi 实现 MJPEG** **流媒体传输，将实时摄像头画面推送至网页界面。

*   **串口协议**：将接收到的网页指令转换为格式数据，通过 UART 发送至 Black 板。

### 2. Black Board 固件



*   **指令解析**：解码 ESP32 发送的 TSI 格式串口数据，并映射为舵机控制信号（例如：前进 = 双舵机正向转动）。

*   **电机控制**：采用 PWM 信号调节舵机速度与方向，支持精确的运动控制。

### 代码文件说明
- **JiXie_TEST**：用于测试舵机的独立测试程序，直接烧录到 Black 板上，用于调试舵机角度与动作响应,验证单个舵机的物理安装与微调参数（脉宽、行程等）。
- **核心代码**：arduino 和 esp32 是项目运行的核心两份代码，烧录后即可启动项目。
  - **arduino 文件夹**：项目的核心代码之一，存放项目烧录到 Black board 的代码。
  - **esp32 文件夹**：项目的核心代码之一，存放项目烧录到 esp32 的代码。
- **Previous_Code**：存放早期的历史版本代码，结构相对冗余。
- **New_version 文件**：基于上述两份核心代码的功能升级版。新版本实现键盘“按下即动、松开即停”的控制逻辑，更符合实时操控体验。
  
## 🚀 快速上手

### 核心逻辑架构

<img width="602" height="664" alt="image" src="https://github.com/user-attachments/assets/37382cc1-9625-40af-b1f7-a97d4778f0ad" />

*   硬件：组装完成的小车（含舵机、Black 板、带摄像头的 ESP32、电源）

*   软件：


    *   ESP32 开发环境-> Arduino IDE

    *   Black Board 开发环境-> Arduino IDE



1.  **烧录固件**

*   克隆本仓库： `git clone https://github.com/OriMidGoingX/Robot-Mechanical-arm`
*   使用 Arduino IDE 将`esp32.ino`目录下的固件上传至 ESP32。

*   通过Arduino IDE将`arduino.ino`目录下的代码上传至 Black 板。
*   ！！！板子型号选择 `Arduino Duemilanove or Diecimila`

1.  **硬件连接**

*   按照接线说明确保所有组件连接正确。

*   为小车供电（使用 两节3.7V 18650锂电池或 USB 电源）。

1.  **运行网页客户端**

*   将电脑连接到 ESP32 创建的 WiFi 网络（SSID：`RobotCar-XXXX`，密码：`12345678`）。

*   在浏览器中访问`http://192.168.4.1`（ESP32 默认 IP）。

### 控制指南



*   **W**：前进

*   **S**：后退

*   **A**：左转

*   **D**：右转

*   **J/K/L**：机械臂抓夹等

## 📝 功能特点



*   **模块化设计**：ESP32（通信）与 Black Board（控制）分离，便于维护

*   **实时反馈**：15-30fps 视频传输，可以调节帧率

*   **跨平台控制**：基于网页的客户端，支持所有带浏览器的设备

*   **可扩展性**：预留传感器接口（如超声波、红外），支持二次开发避障、循迹等功能

## 🔧 可改进方向 
- **前端**：优化 HTML/CSS/JavaScript，提高网页兼容性与交互流畅度。
- **舵机逻辑**：改善舵机平滑控制（插值 / 限速）、添加动作序列缓存与动作冲突保护，防止舵机相互干扰。
- **网页稳定性**：增强网络丢包与重连处理。

## 🤝 贡献指南

欢迎贡献代码！请 fork 本仓库并提交 pull request，包括但不限于 bug 修复、功能新增或文档改进。


